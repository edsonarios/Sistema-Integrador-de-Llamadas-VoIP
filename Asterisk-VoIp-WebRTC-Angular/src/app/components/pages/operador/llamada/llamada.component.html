<!-- Llamada SIP Inactiva -->
<div class="Escritorio" *ngIf="Tipo == 'Llamada'">
    <div class="EscritorioHeader HeadLlamada" [ngClass]="{ 'text-danger': Estado === 'Inactiva', 'text-success': Estado === 'Activa' }">
        <fa-icon class="text-danger" *ngIf="Estado === 'Inactiva'" [icon]="estadoIcon"> </fa-icon>
        <fa-icon class="text-success" *ngIf="Estado === 'Activa'" [icon]="estadoIcon"> </fa-icon>
        {{ Tipo }} {{ Estado }}
        <span (click)="CerrarLlamada(Nombre, Numero, Id, Descripcion, Tipo, Estado)" style="cursor: pointer;">
            <fa-icon class="text-danger" [icon]="SalirIcon" tooltip="Cerrar"> </fa-icon>
        </span>
    </div>
    <div class="EscritorioContentLlamada">
        <div class="ContentIzp ContentLlamada">
            <div class="descripcion">
                <div (click)="detalleUsuario($event, Numero)" class="titulo">{{ Nombre }}</div>
                <button type="button" class="btn btn-primary" (click)="modalinter(modalintervencion)">Intervención</button>
                
                <div class="detalle">{{ Numero }}</div>
            </div>
            <div class="iconoS">
                <fa-icon [icon]="LlamadaIcon"> </fa-icon>
            </div>
        </div>
        <!-- <div class="ContentDer">
            <div class="icon">
                <i class="v-icon-telephone-receiver-with-up-arrow"></i>
            </div>
            <div class="timer">
                --:--:--
            </div>
        </div> -->
    </div>
    <div class="EscritorioOptions">
        <div class="OptionLlamada LlamadaL">
            <a *ngIf="estadoAudioLlamada" class="btn btn-llamada" tooltip="Silenciar Audio" (click)="silenciarLlamada()">
                <fa-icon [icon]="Volumen"> </fa-icon>
            </a>
            <a *ngIf="!estadoAudioLlamada" class="btn btn-info" tooltip="Activar Audio" (click)="silenciarLlamada()">
                <fa-icon [icon]="VolumenIcon"> </fa-icon>
            </a>
            <a *ngIf="estadoLlamada" class="btn btn-llamada" tooltip="Pausar Llamada" (click)="pausarLlamada()">
                <fa-icon [icon]="PausaIcon"> </fa-icon>
            </a>
            <a *ngIf="!estadoLlamada" class="btn btn-info" tooltip="Reconectar Llamada" (click)="pausarLlamada()">
                <fa-icon [icon]="PlayIcon"> </fa-icon>
            </a>
            <a class="btn btn-llamada" tooltip="Colgar" (click)="ColgarLlamada(Nombre, Numero, Id, Descripcion, Tipo, Estado)">
                <fa-icon [icon]="ColgarIcon"> </fa-icon>
            </a>
            <a class="btn btn-llamada" tooltip="Transferencia" placement="left">
                <fa-icon [icon]="IntervenirIcon"> </fa-icon>
            </a>
        </div>
        <!-- <div class="OptionsLlamada">
            <nav><a href="">aparcar</a></nav>
            <nav>
                <a> <i class="v-icon-volume-mute2"></i> Mute</a>
                <a href=""><i class="v-icon-pause2"></i>Pausar</a>
                <a href=""><i class="v-icon-phone-hang-up"></i>Colgar</a>
            </nav>
        </div> -->
    </div>
</div>

<!-- Sala Inactiva -->
<div class="Escritorio" *ngIf="Tipo == 'Sala'">
    <div class="EscritorioHeader HeadSala" [ngClass]="{ 'text-danger': Estado === 'Inactiva', 'text-success': Estado === 'Activa' }">
        <fa-icon class="text-danger" *ngIf="Estado === 'Inactiva'" [icon]="estadoIcon"> </fa-icon>
        <fa-icon class="text-success" *ngIf="Estado === 'Activa'" [icon]="estadoIcon"> </fa-icon>
        {{ Tipo }} {{ Estado }}
        <span (click)="CerrarLlamada(Nombre, Numero, Id, Descripcion, Tipo, Estado)" style="cursor: pointer;">
            <fa-icon class="text-danger" [icon]="SalirIcon" tooltip="Cerrar"> </fa-icon>
        </span>
    </div>
    <div class="EscritorioContentSala">
        <div class="ContentIzp ContentSala">
            <div class="descripcion">
                <div class="titulo">{{ Nombre }}</div>
                <div class="detalle">{{ Descripcion }}</div>
            </div>
            <div *ngIf="esRadio" class="iconoL">
                <fa-icon [icon]="RadioIcon"> </fa-icon>
            </div>
            <div *ngIf="!esRadio" class="iconoL">
                <fa-icon [icon]="HeadsetIcon"> </fa-icon>
            </div>
        </div>
        <!-- <div class="ContentDer">
            Contenido
            <div class="icon">
                0/10
            </div>
            <div class="timer">
                --:--:--
            </div>
        </div> -->
    </div>
    <div class="EscritorioOptions">
        <div class="OptionSala SalaL">
            <a *ngIf="!estadoConferencia" class="btn btn-dark" (click)="conferencia()" tooltip="Entrar a conferencia">
                <fa-icon [icon]="SalaIcon"> </fa-icon>
            </a>
            <a *ngIf="estadoConferencia" class="btn btn-sala" (click)="conferencia()" tooltip="Salir de conferencia">
                <fa-icon class="text-light" [icon]="SalaIcon"> </fa-icon>
            </a>
            <a class="btn btn-dark" (click)="ModalAddParticipante(addParti)" tooltip="Añadir Participante">
                <fa-icon [icon]="AddUserIcon"> </fa-icon>
            </a>
            <a *ngIf="!estadoParticipantes" class="btn btn-dark" (click)="VerParticipantes(Id)" tooltip="Ver Participantes">
                <fa-icon [icon]="VerIcon"> </fa-icon>
            </a>
            <a *ngIf="estadoParticipantes" class="btn btn-sala" (click)="VerParticipantes(Id)" tooltip="Ver Participantes">
                <fa-icon class="text-light" [icon]="VerIcon"> </fa-icon>
            </a>
            <a *ngIf="estadoAgente" class="btn btn-dark" (click)="serAgente()" placement="left" tooltip="Ser Agente de Llamadas">
                <fa-icon [icon]="AgenteIcon"> </fa-icon>
            </a>
            <a *ngIf="!estadoAgente" class="btn btn-sala" (click)="serAgente()" placement="left" tooltip="Desactivar Agente de Llamadas">
                <fa-icon class="text-light" [icon]="AgenteIcon"> </fa-icon>
            </a>
            <a class="btn btn-sala" placement="left" tooltip="Entrar a la Sala">
                <fa-icon class="text-light" [icon]="EntrarIcon"> </fa-icon>
            </a>
        </div>
    </div>
</div>

<!-- Radio  Inactiva -->
<div class="Escritorio" *ngIf="Tipo == 'Radio'">
    <div class="EscritorioHeader HeadSala" [ngClass]="{ 'text-danger': Estado === 'Inactiva', 'text-success': Estado === 'Activa' }">
        <fa-icon class="text-danger" *ngIf="Estado === 'Inactiva'" [icon]="estadoIcon"> </fa-icon>
        <fa-icon class="text-success" *ngIf="Estado === 'Activa'" [icon]="estadoIcon"> </fa-icon>
        {{ Tipo }} {{ Estado }}
        <span (click)="CerrarLlamada(Nombre, Numero, Id, Descripcion, Tipo, Estado)" style="cursor: pointer;">
            <fa-icon class="text-danger" [icon]="SalirIcon" tooltip="Cerrar"> </fa-icon>
        </span>
    </div>
    <div class="EscritorioContentSala">
        <div class="ContentIzp ContentSala">
            <div class="descripcion">
                <div class="titulo">{{ Nombre }}</div>
                <div class="detalle">{{ Descripcion }}</div>
            </div>
            <div *ngIf="esRadio" class="iconoL">
                <fa-icon [icon]="RadioIcon"> </fa-icon>
            </div>
            <div *ngIf="!esRadio" class="iconoL">
                <fa-icon [icon]="HeadsetIcon"> </fa-icon>
            </div>
        </div>
        <!-- <div class="ContentDer">
            Contenido
            <div class="icon">
                0/10
            </div>
            <div class="timer">
                --:--:--
            </div>
        </div> -->
    </div>

    <div class="EscritorioOptions">
        <div class="OptionLlamada LlamadaL">
            <a class="btn btn-llamada" tooltip="Option ">
                <fa-icon [icon]="ColgarIcon"> </fa-icon>
            </a>
            <a class="btn btn-llamada" tooltip="Option" placement="left">
                <fa-icon [icon]="ColgarIcon"> </fa-icon>
            </a>
            <a class="btn btn-llamada" tooltip="Option" placement="left">
                <fa-icon [icon]="ColgarIcon"> </fa-icon>
            </a>
            <a class="btn btn-llamada" tooltip="Option" placement="left">
                <fa-icon [icon]="ColgarIcon"> </fa-icon>
            </a>
        </div>
        <!-- <div class="OptionsLlamada">
            <nav><a href="">aparcar</a></nav>
            <nav>
                <a> <i class="v-icon-volume-mute2"></i> Mute</a>
                <a href=""><i class="v-icon-pause2"></i>Pausar</a>
                <a href=""><i class="v-icon-phone-hang-up"></i>Colgar</a>
            </nav>
        </div> -->
    </div>
</div>



<ng-template #addParti>
    <div class="modal-header">
        <h4>Añadir participantes a <strong>{{ Nombre }}</strong></h4>
    </div>
    <div class="modal-body">
        <table class="table table-hover">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Número</th>
                <th>Opción</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let par of partis">
                <td>{{par.nombre}}</td>
                <td>{{par.numeroSip}}</td>
                <td><i-feather name="plus" style="color: green;" (click)="cambioDeSala(par)" tooltip="Añadir"> </i-feather></td>
              </tr>
            </tbody>
          </table>
    </div>
</ng-template>


<!-- Modal Intervencion de llamadas -->

<ng-template #modalintervencion>
  <div class="modal-body text-center">
    <h3>
        <p>Modo de intervención</p>
    </h3>
    <tabset [justified]="true">
        <tab heading="Silenciosa">
            <div class="row">
                <ul class="p-4">
                    <li>Solo podras escuchar la llamada</li>
                    <li>Ellos no sabran que los estas escuchando</li>
                    <li>No podras conversar con ningun participante</li>
                </ul>
            </div>
                <div class="row">
                    <div class="col">
                        <h4>Origen</h4>
                        <div class="card" style="width:100%">
                            <div class="card-body">
                                <h5 class="card-title">{{ opesrc.nombre }} {{ opesrc.apPaterno }}</h5>
                                <p class="card-text">
                                    {{ Src }}
                                </p> 
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card" style="width:100%">
                            <div class="card-body">
                                <h5 class="card-title">{{ opedest.nombre }} {{ opedest.apPaterno }}</h5>
                                <p class="card-text">
                                    {{ Dts }} 
                                </p>
                            </div>
                        </div>
                        <h4>Destino</h4>
                    </div>
                </div>
                <div class="row">
                    <button (click)="intervencion('silen')" class="btn btn-success btn-block">INTERVENIR</button>
                </div>

        </tab>        
        <tab heading="O/D">
            <div class="row">
                <ul>
                    <li>Podras intervenir a uno de los participantes</li>
                    <li>Solo el participante que intervengas podrá conversar contigo</li>
                </ul>
            </div>
                <div class="row" >
                    <div class="col">
                        <h4>Origen</h4>
                        <div class="card" style="width:auto" (click)="cambioIntervencion('Src', Src)" >
                            <div class="card-body" [ngStyle]="{'background-color': over === 'src' ? 'rgb(3, 187, 27)' : 'white', 'color': over === 'src' ? 'white' : 'black' }">
                            <h5 class="card-title">{{ opesrc.nombre }} {{ opesrc.apPaterno }}</h5>
                                <p class="card-text">
                                    {{ Src }} 
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card" style="width:auto" (click)="cambioIntervencion('Dts', Dts)" >
                            <div class="card-body" [ngStyle]="{'background-color': over === 'dts' ? 'rgb(3, 187, 27)' : 'white', 'color': over === 'dts' ? 'white' : 'black' }">
                                <h5 class="card-title">{{ opedest.nombre }} {{ opedest.apPaterno }}</h5>
                                <p class="card-text">
                                    {{ Dts }} 
                                </p>
                            </div>
                        </div>
                        <h4>Destino</h4>
                    </div>
                </div>
                <div class="row">
                    <button (click)="intervencion('od')" class="btn btn-success btn-block">INTERVENIR</button>
                </div>
        </tab>    
        <tab heading="Ambos">
            <div class="row">
                <ul>
                    <li>Ambos participantes podran oirte </li>
                    <li>Podras conversar con ambos participantes</li>
                    <li>Ellos no sabran que los estas escuchando</li>
                </ul>
            </div>
                <div class="row">
                    <div class="col">
                        <h4>Origen</h4>
                        <div class="card" style="width:auto">
                            <div class="card-body">
                                <h5 class="card-title">{{ opesrc.nombre }} {{ opesrc.apPaterno }}</h5>
                                <p class="card-text">
                                    {{ Src }} 
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card" style="width:auto">
                            <div class="card-body">
                                <h5 class="card-title">{{ opedest.nombre }} {{ opedest.apPaterno }}</h5>
                                <p class="card-text">
                                    {{ Dts }}
                                </p>
                            </div>
                        </div>
                        <h4>Destino</h4>
                    </div>
                </div>
                <div class="row">
                    <button (click)="intervencion('ambos')" class="btn btn-success btn-block">INTERVENIR</button>
                </div>
        </tab>
    </tabset>
    </div>
</ng-template>
